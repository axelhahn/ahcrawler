function _getId(e,t=""){return e.id?e.id:t+e.innerHTML.replace(/\W/g,"")}function initDrawH3list(){var e="",t=!1,n="ulh3list",a="pure-menu-link-active",i=0;$("h3").each((function(){t=_getId(this,"h3"),this.id||(this.id=t),"h3menu"!==this.id&&(i++,e+='<li class="pure-menu-item"><a href="#'+t+'" class="scroll-link pure-menu-link'+(1===i?" "+a:"")+'">'+this.innerHTML.replace(/(<([^>]+)>)/gi,"")+"</a></li>")})),i<3?e="":($(window).on("scroll",(function(){$("h3").each((function(){$(window).scrollTop()>=$(this).offset().top-400&&(t=_getId(this,"h3"),$("#ulh3list a").removeClass(a),$("#ulh3list a[href$="+t+"]").addClass(a))}))})),$('<ul class="pure-menu-list" id="ulh3list" style="display: none;">'+e+"</ul>").insertAfter($("ul .pure-menu-link-active").last()),$("#"+n).slideDown(200))}function initSoftscroll(){$((function(){$("a.scroll-link").click((function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var e=$(this.hash);if((e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length)return $("html,body").animate({scrollTop:e.offset().top-130},300),!1}}))}))}function changeView(e,t){$("."+e).hide(),$("#"+t).show()}function initExtendedView(){var e=localStorage.getItem("crawler_showExtended");$(".btn-extend").hide(),1==e?($(".btn-extend-on").show(),$(".btn-extend-off").hide(),$(".hintextended").hide(),$(".extended").slideDown()):($(".extended").hide(),$(".hintextended").show(),$(".btn-extend-on").hide(),$(".btn-extend-off").show())}function toggleExtendedView(){var e=localStorage.getItem("crawler_showExtended");e=e/1?0:1,localStorage.setItem("crawler_showExtended",e),initExtendedView()}function initToggleAreas(){$(".div-toggle-head").each((function(){var e=$(this).attr("id"),t=$(this.children[0]),n=$(this.nextSibling),a="crawler_toggle-"+e+location.search,i=localStorage.getItem(a);0==i&&($(t).removeClass("open"),$(n).hide()),1==i&&($(t).addClass("open"),$(n).show()),$(this).click((function(){return toggleAreas(this)}))}))}function toggleAreas(e){var t="crawler_toggle-"+$(e).attr("id")+location.search,n=$(e.children[0]),a=$(e.nextSibling),i=$(n).hasClass("open");return 1==(i=i/1?0:1)?($(n).addClass("open"),$(a).slideDown()):($(n).removeClass("open"),$(a).slideUp()),localStorage.setItem(t,i),!1}function initBase64Input(e,t){var n=document.getElementById(e),a=document.getElementById(t);n&&a&&((n=document.getElementById(e)).onchange=function(){a.value=btoa(n.value)})}function initDatatables(){var e={tblSavedCookies:{lengthMenu:[[50,-1]],bStateSave:!0},tableCrawlerErrors:{aaSorting:[[1,"asc"]],bStateSave:!0},tableShortTitles:{aaSorting:[[1,"asc"]],bStateSave:!0},tableShortDescr:{aaSorting:[[1,"asc"]],bStateSave:!0},tableShortKeywords:{aaSorting:[[1,"asc"]],bStateSave:!0},tableLongLoad:{aaSorting:[[1,"desc"]],bStateSave:!0},tableLargePages:{aaSorting:[[1,"desc"]],bStateSave:!0},httpstatuscdodes:{lengthMenu:[[-1]],bStateSave:!0},tblLangtexts:{lengthMenu:[[-1]],bStateSave:!0},tblCounterdata:{aaSorting:[[0,"desc"]],bStateSave:!1},_default:{lengthMenu:[[10,25,50,100,-1]]}};$(".datatable").each((function(){var t=e[this.id]?e[this.id]:e._default;if(t.lengthMenu&&!t.lengthMenu[1]){t.lengthMenu[1]=[];for(var n=0;n<t.lengthMenu[0].length;n++)t.lengthMenu[1][n]=-1===t.lengthMenu[0][n]?"...":t.lengthMenu[0][n]}this.id&&$("#"+this.id).DataTable(t)}))}function toggleSelectBox(e){e.size>1?(e.size=1,e.style.position="relative"):(e.size=e.options.length,e.style.position="absolute"),e.style.height="auto"}function initSelectProject(){$("#selectProject select").change((function(){location.href=this.value}))}function modalDlg_setTitle(e=""){document.getElementById("dialogtitle").innerHTML=e||"&nbsp;"}function modalDlg_setContent(e=""){document.getElementById("dialogcontent").innerHTML=e}function showModalUrl(e,t=""){showModal('<iframe src="'+e+'" style="width: 100%; border: 0; height: 800px;"></iframe>',t)}function showModal(e="",t=""){modalDlg_setTitle(t),modalDlg_setContent(e),showModalWindow(!0)}function showModalWindow(e=1){var t=document.getElementById("overlay"),n=document.getElementById("content"),a=document.getElementById("navmain");return e?(t.style.display="block",n.style.filter="blur(0.2em)",a.style.filter="blur(0.2em)"):(t.style.display="none",n.style.filter="",a.style.filter=""),!1}function hideModal(){return showModalWindow(!1),!1}function getStyleRuleValue(e,t,n){for(var a=null,i=void 0!==n?[n]:document.styleSheets,l=0,o=i.length;l<o;l++){n=i[l];try{if(!n.cssRules)continue;for(var s=0,r=n.cssRules.length;s<r;s++){var d=n.cssRules[s];d.selectorText&&-1!==d.selectorText.split(",").indexOf(t)&&(a=d.style[e])}}catch(e){if("SecurityError"!==e.name)throw e}}return a}var indexer_was_started=!1;function updateStatus(e){var t=document.getElementById("divStatus");fetch(e,{}).then((e=>e.text())).then((n=>{t.innerHTML=n,t.style.display=n?"block":"none",t.innerHTML?(indexer_was_started=!0,$(".actions-crawler .running").show(),$(".actions-crawler .stopped").hide()):($(".actions-crawler .running").hide(),$(".actions-crawler .stopped").show(),indexer_was_started&&(location.reload(),indexer_was_started=!1));var a=n?1:5;window.setTimeout('updateStatus("'+e+'")',1e3*a)}))}function initTextareas(){$(".pure-control-group textarea").dblclick((function(){$(this).attr("placeholder")&&""===$(this).val()&&$(this).val($(this).attr("placeholder"))}))}function initSelect2(){$("select").select2()}window.addEventListener("load",(function(){initDrawH3list(),initSoftscroll(),initExtendedView(),initToggleAreas(),initDatatables(),initSelectProject(),initBase64Input("e_url","urlbase64"),initTextareas(),initSelect2();var e=document.location.pathname.replace(/(.*\/)[a-z0-0\.]*$/,"$1");if(e.indexOf("/backend/")>=0&&e.indexOf("/backend/")>e.length-10){var t=document.location.href.replace(/\?.*$/,"").replace(/(.*\/)[a-z0-0\.]*$/,"$1");updateStatus(t+="/get.php?action=getstatus")}}));